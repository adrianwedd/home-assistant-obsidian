// .devcontainer/devcontainer.json  — minimal & robust
{
  "name": "HA-Addon Dev",
  "image": "ghcr.io/home-assistant/devcontainer:addons",

  // Features
  "features": {
    "ghcr.io/devcontainers/features/docker-in-docker:2": { "moby": "false" },
    "ghcr.io/devcontainers/features/python:1":           { "version": "3.11"  }
  },

  // ONE privileged flag – the Feature already passes the socket through
  "runArgs": [ "--privileged" ],

  // set up helpers once
  "postCreateCommand": "pipx install pre-commit && pre-commit install",

  // VS Code goodies
  "extensions": [ "timonwong.shellcheck", "esbenp.prettier-vscode" ]
}
